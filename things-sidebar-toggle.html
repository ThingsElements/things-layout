<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../paper-tooltip/paper-tooltip.html">

<link rel="import" href="../things-global-behavior/things-global-behavior.html">
<link rel="import" href="../things-i18n-msg/things-i18n-msg.html">

<dom-module id="things-sidebar-toggle">
  <template>
  <style>
    :host {
      display: block;
      background-color:var(--paper-blue-grey-800);
      color:#fff;
    }

    :host iron-icon {
      width:15px;height:15px;
      margin-right:4px;
    }
    
    :host .side-toggle {
      background-color:var(--paper-teal-700);
    }
    
    :host .side-toggle paper-icon-button {
      width:31px;height:31px;
      margin-left:3px;
      padding:0 4px 0 2px;
    }

    :host .search {
      padding:5px 0 3px 5px;
    }
    
    :host .search input {
      background-color:rgba(255,255,255,.1);
      border-radius:3px;
      border:1px solid rgba(255,255,255,.15);
      padding:1px 3px;
      max-width:120px;
      color:#fff;
      font-size:13px;
    }

    :host .search paper-icon-button {
      width:22px;height:22px;
      margin-left:3px;
      padding:1px;
    }
  </style>

    <!-- menu toggle -->
    <paper-icon-button icon="icons:menu" id="sidebar-toggler">
    </paper-icon-button>

    <paper-tooltip for="sidebar-toggler">
      <things-i18n-msg msgid="button.toggle_sidebar" auto>Toggle Sidebar</things-i18n-msg>
    </paper-tooltip>
  </template>

  <script>
    Polymer({
      is: 'things-sidebar-toggle',

      behaviors: [ 
        Things.GlobalBehavior
      ],

      properties: {
        /**
         * drawer id
         */
        drawerId: {
          type: String
        }
      },

      listeners: {
        'sidebar-toggler.tap': 'toggleSidebar'
      },

      /**
       * Toggle Sidebar. 로그인 이후에만 toggle이 적용됨 
       */
      toggleSidebar: function(e) {
        var drawer = app.$[this.drawerId];
        
        if(drawer.forceNarrow) {
          drawer.forceNarrow = false
        } else if(!drawer.narrow) {
          drawer.forceNarrow = true
        } else {
          drawer.togglePanel();
        }
      }

    });
  </script>
</dom-module>